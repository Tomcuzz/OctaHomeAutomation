<div class="message-column">
	<div class="message-area" id="message-area">
		
		
		
	</div>
</div>

<script>
	var shownLogs = [];
	var shownNotifications = [];
	var shownWarnings = [];
	var shownErrors = [];
	
	var logUrl = Urls.MessagesCommand('json', 'AllNewNotifications');
	var notificationUrl = Urls.MessagesCommand('json', 'AllNewNotifications');
	var warningUrl = Urls.MessagesCommand('json', 'AllNewWarnings');
	var errorUrl = Urls.MessagesCommand('json', 'AllNewErrors');
	$.getJSON(logUrl, function (json) {
		var x;
		for (x in json) {
			if containsObject(x["pk"], shownLogs) {
				displayMessage("log", x["pk"], x["fields"]["Title"], x["fields"]["Message"]);
			}
		}
	});
	$.getJSON(notificationUrl, function (json) {
		var x;
		for (x in json) {
			if containsObject(x["pk"], shownNotifications) {
				displayMessage("notification", x["pk"], x["fields"]["Title"], x["fields"]["Message"]);
			}
		}
	});
	$.getJSON(warningUrl, function (json) {
		var x;
		for (x in json) {
			if containsObject(x["pk"], shownWarnings) {
				displayMessage("warning", x["pk"], x["fields"]["Title"], x["fields"]["Message"]);
			}
		}
	});
	$.getJSON(errorUrl, function (json) {
		var x;
		for (x in json) {
			if containsObject(x["pk"], shownErrors) {
				displayMessage("error", x["pk"], x["fields"]["Title"], x["fields"]["Message"]);
			}
		}
	});
	
	
	
	
	displayMessage("log", "1", "Tite", "Here is a log");
	displayMessage("notification", "2", "Tite", "Here is a notification");
	displayMessage("warning", "3", "Tite", "Here is a warning");
	displayMessage("error", "4", "Tite", "Here is a error");
	
	function displayMessage(type, id, title, message) {
		var messageClass = "";
		if (type == "log") {
			messageClass = "alert alert-info alert-dismissible";
		} else if (type == "notification") {
			messageClass = "alert alert-success alert-dismissible";
		} else if (type == "warning") {
			messageClass = "alert alert-warning alert-dismissible";
		} else if (type == "error") {
			messageClass = "alert alert-danger alert-dismissible";
		} else {
			messageClass = "alert alert-info alert-dismissible";
		}
		
		var messageArea = document.getElementById("message-area");
		
		var newMessageNode = document.createElement("div");
		newMessageNode.className = messageClass; 
		newMessageNode.setAttribute( "role", "alert" );
		
		var newMessageButton = document.createElement("button");
		newMessageButton.className = "close";
		newMessageButton.setAttribute( "type", "button" );
		newMessageButton.setAttribute( "data-dismiss", "alert" );
		newMessageButton.setAttribute( "aria-label", "Close" );
		
		var newMessageSymbol = document.createElement("span");
		newMessageSymbol.setAttribute( "aria-hidden", "true" );
		newMessageSymbol.innerHTML = "&times;";
		newMessageButton.appendChild(newMessageSymbol);
		newMessageNode.appendChild(newMessageButton);
		
		var newMessageTextArea = document.createElement("div");
		
		var newMessageTitle = document.createElement("strong");
		newMessageTitle.innerHTML = "Title goes here" + " \- ";
		newMessageTextArea.appendChild(newMessageTitle);
		
		var newMessageBody = document.createElement("div");
		newMessageBody.innerHTML = "The longer body goes here";
		newMessageBody.style.display = "inline";
		newMessageTextArea.appendChild(newMessageBody);
		
		newMessageNode.appendChild(newMessageTextArea);
		
		$(newMessageNode).appendTo(messageArea).fadeIn(2000);
	}
	
	function dismissWarning(id) {
		
	}
	
	function containsObject(obj, list) {
		var i;
		for (i = 0; i < list.length; i++) {
			if (list[i] === obj) {
				return true;
			}
		}
		return false;
	}
	
</script>
